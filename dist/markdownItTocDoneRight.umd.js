!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.markdownItTocDoneRight=n()}(this,function(){function e(e){return encodeURIComponent(String(e).trim().toLowerCase().replace(/\s+/g,"-"))}function n(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}return function(r,t){var l;t=Object.assign({},{placeholder:"(\\$\\{toc\\}|\\[\\[?_?toc_?\\]?\\])",slugify:e,containerClass:"table-of-contents",listClass:void 0,itemClass:void 0,linkClass:void 0,level:1,listType:"ol",format:void 0,tocCallback:void 0},t);var o=new RegExp("^"+t.placeholder+"$","i");r.renderer.rules.tocOpen=function(){return'<nav class="'+n(t.containerClass)+'">'},r.renderer.rules.tocClose=function(){return"</nav>"},r.renderer.rules.tocBody=function(){return function e(r){var l=t.listClass?' class="'+n(t.listClass)+'"':"",o=t.itemClass?' class="'+n(t.itemClass)+'"':"",i=t.linkClass?' class="'+n(t.linkClass)+'"':"",c=Object.keys(r.c);if(0===c.length)return"";var s="<"+(n(t.listType)+l)+">";return c.forEach(function(l){var c=r.c[l];s+="<li"+o+"><a"+i+' href="#'+c.id+'">'+("function"==typeof t.format?t.format(c.n,n):n(c.n))+"</a>"+e(c)+"</li>"}),s+="</"+n(t.listType)+">"}(l)},r.core.ruler.push("generateTocAst",function(e){l=function(e){var n={};function r(e){for(var r=e,t=2;Object.prototype.hasOwnProperty.call(n,r);)r=e+"-"+t++;return n[r]=!0,r}for(var l,o={l:0,n:"",c:{}},i=[o],c=Array.isArray(t.level)?(l=t.level,function(e){return l.includes(e)}):function(e){return function(n){return n>=e}}(t.level),s=0,a=e.length;s<a;s++){var u=e[s];if("heading_open"===u.type){var f=e[s+1].children.filter(function(e){return"text"===e.type||"code_inline"===e.type}).reduce(function(e,n){return e+n.content},""),p={l:parseInt(u.tag.substr(1),10),n:f,c:{}};if(c(p.l))if(p.id=r(t.slugify(f)),p.l>i[0].l)i[0].c[p.id]=p,i.unshift(p);else if(p.l===i[0].l)i[1].c[p.id]=p,i[0]=p;else{for(;p.l<=i[0].l;)i.shift();i[0].c[p.id]=p,i.unshift(p)}}}return o}(e.tokens),"function"==typeof t.tocCallback&&t.tocCallback(r.renderer.rules.tocOpen()+r.renderer.rules.tocBody()+r.renderer.rules.tocClose())}),r.block.ruler.before("heading","toc",function(e,n,r,t){var l;if(e.sCount[n]-e.blkIndent>=4)return!1;var i=e.src.slice(e.bMarks[n]+e.tShift[n],e.eMarks[n]).split(" ")[0];return!(!o.test(i)||!t&&(e.line=n+1,(l=e.push("tocOpen","nav",1)).markup="",l.map=[n,e.line],(l=e.push("tocBody","",0)).markup="",l.map=[n,e.line],l.children=[],(l=e.push("tocClose","nav",-1)).markup="",0))},{alt:["paragraph","reference","blockquote"]})}});
//# sourceMappingURL=markdownItTocDoneRight.umd.js.map
